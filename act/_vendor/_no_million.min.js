var b="__m_dom_ref",A="__m_old_vnode",y="__m_node_object_pool",T="http://www.w3.org/1999/xlink",S="http://www.w3.org/XML/1998/namespace";var L=(t=>(t[t.IGNORE_NODE=0]="IGNORE_NODE",t[t.REPLACE_NODE=1]="REPLACE_NODE",t[t.NO_CHILDREN=2]="NO_CHILDREN",t[t.ONLY_TEXT_CHILDREN=3]="ONLY_TEXT_CHILDREN",t[t.ONLY_KEYED_CHILDREN=4]="ONLY_KEYED_CHILDREN",t[t.ANY_CHILDREN=5]="ANY_CHILDREN",t))(L||{}),O=(t=>(t[t.INSERT=0]="INSERT",t[t.UPDATE=1]="UPDATE",t[t.DELETE=2]="DELETE",t))(O||{}),P=t=>(t.props||(t.props={}),H(t.tag,t.props,t.children),t),H=(t,e,s)=>{if(e.className&&(e.class=e.className,delete e.className),e.ns="http://www.w3.org/2000/svg",s&&t!=="foreignObject")for(let n of s)typeof n!="string"&&n.props&&H(n.tag,n.props,n.children)},w=t=>Object.keys(t).filter(e=>t[e]).join(" "),U=t=>Object.entries(t).map(e=>e.join(":")).join(";"),W=t=>{let e={};for(let s in t)e[s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()]=t[s];return e},F={INSERT:(t=0)=>[O.INSERT,t],UPDATE:(t=0)=>[O.UPDATE,t],DELETE:(t=0)=>[O.DELETE,t]},J=(t,e,s)=>{let n;return t.key&&(n=t.key,delete t.key),{data:t,resolve:e,el:s,key:n}},$=(t,e,s,n,i)=>{let r;e?.key&&(r=e.key,delete e.key);let l={tag:t,props:e,children:s,key:r,flag:n,delta:i};return l.tag?.toLowerCase()==="svg"?P(l):l};var D=(t,e=!0)=>{if(t?.data)return t?.el?t.el:D(t?.resolve());if(t==null)return document.createComment("");if(typeof t=="string")return document.createTextNode(t);let s=t,n=s.props?.ns?document.createElementNS(s.props?.ns,s.tag):document.createElement(s.tag);if(s.props)for(let i in s.props){let r=s.props[i];if(i.startsWith("on")){let l=i.slice(2).toLowerCase();n.addEventListener(l,r)}else i.charCodeAt(0)===120?i.charCodeAt(3)===58?n.setAttributeNS(S,i,String(r)):i.charCodeAt(5)===58&&n.setAttributeNS(T,i,String(r)):n[i]!==void 0&&!(n instanceof SVGElement)?n[i]=r:n.setAttribute(i,String(r))}if(s.children)for(let i=0;i<s.children.length;++i)n.appendChild(D(s.children[i],!1));return e&&(n[A]=t),n},j=(t=[])=>(e,s,n,i=c=>c(),r=[],l)=>{let c=a=>({el:a,newVNode:s,oldVNode:n,effects:r,commit:i,driver:l}),E=a=>{let o=c(a);for(let u=0;u<t.length;++u)i(()=>{t[u](e,s,n,i,r,l)},o);return o},h=n?.children??[],d=s.children,f=s.delta,p=(a,o,u)=>l(a,o,u,i,r).effects;if(f){for(let a=0;a<f.length;++a){let[o,u]=f[a],g=e.childNodes.item(u);o===O.INSERT&&r.push(()=>e.insertBefore(D(d[u],!1),g)),o===O.UPDATE&&i(()=>{r=p(g,d[u],h[u])},c(g)),o===O.DELETE&&r.push(()=>e.removeChild(g))}return E(e)}if(!d||s.flag===L.NO_CHILDREN)return h&&r.push(()=>e.textContent=""),E(e);if(s.flag===L.ONLY_KEYED_CHILDREN){e[y]||(e[y]={});let a=0,o=0,u=h.length-1,g=d.length-1;for(;a<=u&&o<=g;){let _=h[u],C=d[g],N=h[a],m=d[o];if(_.key===C.key)u--,g--;else if(N.key===m.key)a++,o++;else if(N.key===C.key){let k=e.childNodes.item(a++),v=g--;r.push(()=>e.insertBefore(k,e.childNodes.item(v).nextSibling))}else if(_.key===m.key){let k=e.childNodes.item(u--),v=o++;r.push(()=>e.insertBefore(k,e.childNodes.item(v)))}else break}if(a>u)for(;o<=g;){let _=o++;r.push(()=>e.insertBefore(e[y][d[_].key]??D(d[_],!1),e.childNodes.item(_)))}else if(o>g)for(;a<=u;){let _=a++,C=e.childNodes.item(_);e[y][h[_].key]=C,r.push(()=>e.removeChild(C))}else{let _={};for(;a<=u;)_[h[a].key]=a++;for(;o<=g;){let C=o++,N=d[C],m=_[N.key];if(m!==void 0){let k=e.childNodes.item(m);r.push(()=>e.insertBefore(k,e.childNodes.item(C))),delete _[N.key]}else r.push(()=>e.insertBefore(e[y][N.key]??D(N,!1),e.childNodes.item(C)))}for(let C in _){let N=e.childNodes.item(_[C]);e[y][C]=N,r.push(()=>e.removeChild(N))}}return E(e)}if(s.flag===L.ONLY_TEXT_CHILDREN){let a=Array.isArray(n?.children)?n?.children.join(""):n?.children,o=Array.isArray(s?.children)?s?.children.join(""):s?.children;return a!==o&&r.push(()=>e.textContent=o),E(e)}if(s.flag===void 0||s.flag===L.ANY_CHILDREN){if(h&&d){let a=Math.min(h.length,d.length);for(let o=a-1;o>=0;--o)i(()=>{r=p(e.childNodes.item(o),d[o],h[o])},c(e));if(d.length>h.length)for(let o=a;o<d.length;++o){let u=D(d[o],!1);r.push(()=>e.appendChild(u))}else if(d.length<h.length)for(let o=h.length-1;o>=a;--o)r.push(()=>e.removeChild(e.childNodes.item(o)))}else if(d)for(let a=0;a<d.length;++a){let o=D(d[a],!1);r.push(()=>e.appendChild(o))}return E(e)}return E(e)},x=t=>{let e=(s,n,i,r=c=>c(),l=[])=>{let c=E=>(i||l.push(()=>E[A]=n),{el:E,newVNode:n,oldVNode:i,effects:l});if(n?.flag===L.IGNORE_NODE||i?.flag===L.IGNORE_NODE)return c(s);if(n==null)return l.push(()=>s.remove()),c(s);{let E=i??s[A],h=typeof E=="string"||typeof n=="string";if(h&&E!==n){let d=D(n,!1);return l.push(()=>s.replaceWith(d)),c(d)}if(!h){let d=E,f=n;if(f.ignore)return c(s);d?.data&&(E=d.resolve()),f?.data&&(n=f.resolve());let p=E,a=n;if(a.flag===L.REPLACE_NODE||p.flag===L.REPLACE_NODE){let o=D(n);return s.replaceWith(o),c(s)}if(p?.key===void 0&&a?.key===void 0||p?.key!==a?.key){if(p?.tag!==a?.tag||s instanceof Text){let o=D(a,!1);return l.push(()=>s.replaceWith(o)),c(o)}for(let o=0;o<t.length;++o)r(()=>{t[o](s,a,p,r,l,e)},{el:s,newVNode:n,oldVNode:i,effects:l})}}}return c(s)};return e},I=(t,e,s,n,i)=>{if(s!==n)if(e.startsWith("on")){let r=e.slice(2).toLowerCase();i.push(()=>{s&&t.removeEventListener(r,s),t.addEventListener(r,n)})}else e.charCodeAt(0)===120?e.charCodeAt(3)===58?t.setAttributeNS(S,e,String(n)):e.charCodeAt(5)===58&&t.setAttributeNS(T,e,String(n)):t[e]!==void 0&&!(t instanceof SVGElement)?n?i.push(()=>t[e]=n):i.push(()=>{t[e]="",t.removeAttribute(e),delete t[e]}):n?i.push(()=>t.setAttribute(e,String(n))):i.push(()=>t.removeAttribute(e))},B=(t=[])=>(e,s,n,i=l=>l(),r=[])=>{let l=n?.props,c=s?.props,E={el:e,newVNode:s,oldVNode:n,effects:r};if(l!==c)if(l===void 0||c===null)for(let h in c)I(e,h,void 0,c[h],r);else if(c==null)for(let h in l)I(e,h,l[h],void 0,r);else{let h=0;for(let f in l)I(e,f,l[f],Object.prototype.hasOwnProperty.call(c,f)?(h++,c[f]):void 0,r);let d=Object.keys(c);for(let f=0;h<d.length&&f<d.length;++f){let p=d[f];Object.prototype.hasOwnProperty.call(l,p)||(I(e,p,void 0,c[p],r),++h)}}for(let h=0;h<t.length;++h)i(()=>{t[h](e,s,n,i,r)},E);return E},X=0,K=x([j(),B()]),M=(t,e,s,n=()=>!0,i=[])=>{let l=K(t,e,s,(c,E)=>{n(E.el,E.newVNode,E.oldVNode)&&c()},i);for(let c=0;c<i.length;c++)i[c]();return l.el},z=(t,e,s,n)=>{let i=t[b];if(i)return M(i,e,s,n);{let r=D(e);return t.textContent="",t.appendChild(r),t[b]=r,r}},G=Promise.resolve().then.bind(Promise.resolve()),Z=t=>{navigator?.scheduling?.isInputPending({includeContinuous:!0})||performance.now()<=X?G(t):t(),X=performance.now()+16};export{F as Delta,O as DeltaTypes,L as Flags,A as OLD_VNODE_FIELD,w as className,D as createElement,G as defer,K as diff,J as entity,W as kebab,$ as m,H as ns,M as patch,z as render,Z as schedule,U as style,P as svg,I as updateProp,j as useChildren,x as useNode,B as useProps};
